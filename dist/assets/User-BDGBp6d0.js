import{r as T,A as _,_ as S,c as v,u as B,j as e,R as h,t as $,p as I,h as L,q as k,v as E,g as A,w as F,x as P}from"./index-DbhMvLFR.js";import{D as b,R as l,C as o,a as m,F as C,l as U,T as q}from"./Filter-D0HOPc22.js";import{s as M,C as z,D as f}from"./Home-BDiaTItm.js";import{L as D}from"./index-B9hFuPpT.js";import{E as G}from"./index-B3RJRkxt.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};const X=H;var K=function(s,r){return T.createElement(_,S({},s,{ref:r,icon:X}))},J=T.forwardRef(K);const Q=J;function V(t){const{title:s="DETAIL",item:r={},open:R,onClose:x}=t,u=B(),[d,p]=T.useState(!1),[j,g]=M.useMessage(),w=()=>{const c=()=>{t.listOtherReportOfReporter({id:r.user_id,orderBy:"DESC"})},y=a=>{t.filterOtherReportOfReporter({reason:a.reason,id:r.user_id})},n=a=>{t.listOtherReportOfReporter({...a,id:r.user_id})},[i,O]=h.useState([]);return h.useEffect(()=>{let a=t.dataOtherReport.map((N,ne)=>({...N}));O(a)},[t.dataOtherReport]),e.jsxs(b,{className:"drawer2",title:"Các Báo Cáo Khác Từ Người Báo Cáo",width:"40vw",closable:!1,onClose:()=>{p(!1),t.closeDetailLinkAndAccount()},open:d,placement:"left",children:[e.jsx(C,{reloadData:c,isSearch:!1,isNew:!0,isReason:!0,onSelect:y,onFilterTime:n}),e.jsx(f,{}),i?e.jsx(D,{itemLayout:"horizontal",dataSource:i,renderItem:a=>e.jsx(D.Item,{style:{width:"95%",margin:"auto"},children:e.jsx(D.Item.Meta,{style:{width:"90%"},title:e.jsxs("span",{style:{width:400,marginBottom:10},children:["Người bị tố cáo:  ",`${a.first_name} ${a.last_name}`]}),description:e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("h4",{children:`Thời gian: ${a.created_at}`}),e.jsx("h4",{children:`Số điện thoại: ${a.phone}`}),e.jsx("h4",{style:{width:"100%",marginBottom:10},children:a.reason_label?`Lí do báo cáo: ${a.reason_label}`:"Lí do báo cáo : chưa có"}),e.jsx("p",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:a.content?`Nội dung báo cáo: ${a.content}`:"Nội dung báo cáo: Trống"})]})})})}):""]})};return e.jsxs("div",{children:[g,e.jsxs(b,{className:"drawer1",title:"Thông tin về báo cáo",width:520,closable:!1,onClose:x,open:R,placement:"left",children:[e.jsxs(l,{className:"row",children:[e.jsx(o,{span:12,children:"Tên đầy đủ người báo cáo:"}),e.jsx(o,{span:8,children:`${r.first_name} ${r.last_name}`})]}),e.jsxs(l,{className:"row",children:[e.jsx(o,{span:12,children:"Số điện thoại:"}),e.jsx(o,{span:8,children:r.phone}),e.jsxs(o,{span:4,children:[" ",e.jsx(z,{className:"copy-icon",onClick:()=>{u.clipboard.writeText(r.phone).then(()=>{j.open({type:"success",content:"copy successfully"})})}})]})]}),e.jsxs(l,{className:"row",children:[e.jsx(o,{span:12,children:"Lí do báo cáo:"}),e.jsx(o,{span:8,children:r.reason_label})]}),e.jsxs(l,{className:"row",children:[e.jsx(o,{span:12,children:"Nội dung báo cáo:"}),e.jsx(o,{span:12,children:r.content})]}),e.jsxs(l,{className:"row",children:[e.jsx(o,{span:12,children:"Thời gian tạo:"}),e.jsx(o,{span:12,children:r.created_at})]}),e.jsx(f,{}),e.jsxs(l,{children:[e.jsx(o,{span:12,style:{color:"#ff9800"},children:"Xác nhận đã đọc tin báo cáo :"}),e.jsx(m,{value:1,onChange:c=>{t.tickNewsReport({id:r.id,process:c.target.value})},children:"Đánh dấu đã đọc tin"})]}),e.jsx(f,{}),e.jsxs(l,{className:"row",children:[e.jsxs(o,{span:12,children:[e.jsx(l,{style:{color:"#2196f3",marginBottom:"20px"},children:"Chấp thuận vi phạm báo cáo :"}),e.jsx(l,{style:{color:"#f44336"},children:"Từ chối vi phạm báo cáo:"})]}),e.jsxs(o,{span:12,children:[e.jsxs(m.Group,{style:{display:"flex",flexDirection:"column"},onChange:c=>{t.accessOrDeniedReport({id:r.id,process:c.target.value})},children:[e.jsx(m,{value:1,style:{marginBottom:"20px"},children:"Đồng ý"}),e.jsx(m,{value:2,children:"Từ chối"})]})," "]})]}),e.jsx(f,{}),e.jsxs(l,{style:{color:"#03a9f4",cursor:"pointer"},onClick:()=>{t.listOtherReportOfReporter({id:r.user_id,orderBy:"DESC"}),p(!0)},children:[e.jsx(o,{span:15,children:"Xem thêm  báo cáo khác của người báo cáo"}),e.jsx(o,{span:4,children:e.jsx(Q,{})})]}),w()]})]})}const W=t=>({reportState:t.ReportReducer,dataOtherReport:t.ReporterReducer.data}),Y=t=>({tickNewsReport:s=>{t($(s))},accessOrDeniedReport:s=>{t(I(s))},filterByReason:s=>{t(L(s))},listOtherReportOfReporter:s=>{t(k(s))},filterOtherReportOfReporter:s=>{t(E(s))}}),Z=v(W,Y)(V),ee=t=>{const[s,r]=h.useState({}),R=[{title:"Thứ Tự",width:100,dataIndex:"index",align:"center",key:"index"},{title:"Tên Người Báo Cáo",dataIndex:"fullName",align:"center",key:"name_reporter"},{title:"Số Điện Thoại",dataIndex:"phone",align:"center",key:"phone"},{title:"Lí Do Báo Cáo",dataIndex:"reason_label",align:"center",key:"reason"},{title:"Thời Gian Báo Cáo",dataIndex:"created_at",align:"center",key:"created_at"},{title:"Chức Năng",align:"center",dataIndex:"action",key:"action",render:(n,i,O)=>e.jsx(l,{children:e.jsx(o,{span:5,offset:9,children:e.jsx(G,{onClick:()=>{r(i),u(!0)},style:{color:"#2196f3",cursor:"pointer",fontSize:20}})})},O)}],[x,u]=h.useState(!1),d=A(),p=()=>{u(!x)},j=()=>{u(!1),t.closeForm()};h.useEffect(()=>{const n=d.pathname.split("/");t.reportUser({id:n[3],orderBy:"DESC"})},[]);const g=h.useMemo(()=>t.store.data.map((n,i)=>({...n,fullName:`${n.first_name}  ${n.last_name}`,reason_label:U[n.reason],index:i+1})),[t.store.data,t.store.limit,t.store.page]),w=()=>{const n=d.pathname.split("/");t.reportUser({id:n[3],orderBy:"DESC"})},c=n=>{const i=d.pathname.split("/");t.filterByReason({reason:n.reason,id:i[3]})},y=n=>{const i=d.pathname.split("/");t.reportUser({...n,id:i[3]})};return e.jsxs("div",{children:[e.jsx(C,{reloadData:w,isSearch:!1,isNew:!0,isReason:!0,onSelect:c,onFilterTime:y}),e.jsx(Z,{open:x,onOpen:p,onClose:j,item:s,title:"DETAIL REPORT INFORMATION"}),e.jsx(q,{columns:R,pageSize:t.store.limit,totalPage:t.store.totalPage,data:g,onChangePage:(n,i)=>{t.reportUser({page:n,limit:i})}})]})},te=t=>({store:t.UserReducer}),se=t=>({reportUser:s=>{t(F(s))},filterByReason:s=>{t(P(s))}}),re=v(te,se)(ee);function de(){return e.jsx("div",{className:"wrap-home",children:e.jsx(re,{})})}export{de as default};
